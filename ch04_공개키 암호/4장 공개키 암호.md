# 4. 공개키 암호

<br>

## 4.1 개요
### 대칭키 암호 vs 공개키 암호
#### 대칭키 암호
- 암호화와 복호화에 같은 키 사용
    - 키를 안전하게 공유하기 어렵다
#### 공개키 암호
- 서로 다른 키 쌍(공개키, 개인키) 시용
    - 공개키는 모두에게 알려져도 되고, 개인키만 본인이 보관
    - 대칭키 배포 문제를 해결할 수 있다.

### 공개키 암호의 특징
- 단방향 함수 기반
    - 어떠한 입력에 대한 출력은 쉬우나, 출력만을 가지고 입력을 구하기는 어렵다.

### 공개키 암호의 응용
#### 암호화
- 발신자가 수신자의 공개키로 암호화 -> 수신자만 개인키로 복호화 가능
#### 디지털 서명
- 발신자가 자신의 개인키로 메세지를 암호화 -> 누구나 발신자의 공개키로 검증
- 종이 서명과 달리 위조 복제가 어려움
#### 키 교환
- 대칭키 암호를 안전하게 사용할 수 있도록 공개키 암호를 이용해 세션키 교환

### 여러가지 공개키 암호체계
- 배낭암호체계 (knapsack cryptosystem)
- RSA
- 디피-헬먼 키 교환 알고리즘
- 타원곡선 암호체계 (ECC)

<br>

## 4.2 배낭 암호

### 배낭(= 부분합 문제)
- 정해진 물건 중 몇 개를 골라 정확히 목표합을 만들 수 있나?
- 슈퍼증가 수열을 쓰면 이 퍼즐은 그리디로 순식간에 풀린다

<br>

## 4.3 RSA
### 디피-헬먼의 불편한 점
- 공유 비밀 생성 방식일 뿐, 암호문 구조가 없다.
    - DH는 "키 교환 프로토콜"이라서 결과물은 단지 공유된 수
    - 메세지를 암호화하려면 K를 대칭키로 다시 써야 함
- 직접 암호화 규격 부재
    - RSA처럼 직접 암호화 수식이 없음
    - 따라서 메세지를 M 자체로 변환하는 과정이 표준화되지 못했음
- 인증 부족
    - 순수 DH는 키 교환만 하므로 "누구와 키를 공유했는지" 증명할 방법이 없음
    - 중간자 공격 (MiTM)에 매우 취약 -> 단독 메세지 암호화에 바로 쓰기 곤란

### RSA
>DH의 공개키 개념을 실제로 메세지 암호화 전자서명에 적용할 수 있도록 한 첫 실용적 공개키 암호 시스템

- 곱셈은 쉽지만, 소인수 분해는 어렵다는 정수론적 비대칭성
- 오일러 정리와 모듈러 산술 구조를 기반으로 암호화 복호화가 수학적으로 일관되게 동작

```
## RSA 키 생성 과정

1. 두 개의 큰 소수 p, q 선택
2. N = p x q 계산 -> 모듈러 기반
3. 오일러 피함수 $\phi(N) = (p-1)(q-1)$
4. 공개 지수 e 선택
5. 개인 지수 d 계산 
6. 공개키 : (N, e), 개인키 : d
```

#### [RSA 실습](https://github.com/Do-heewan/Information_Security/blob/main/4%EC%A3%BC%EC%B0%A8/RSA_Encryption.py)


<br>

## 4.4 DH
>디피(Diffie)와 헬먼(Hellman)
- 1967년 공개키 암호 개념을 처음 세상에 발표
- 키 교환 알고리즘 제시

### Diffie-Hellman 키 교환 알고리즘이란?
- 수학적 함정(이산 로그 문제)을 이용해서 공개적으로 값들을 주고 받아도 최종적으로는 둘만 아는 공유 비밀키를 만들어낸다.

```
## Diffie-Hellman 키 교환 알고리즘 과정

1. 큰 소수 p 원시근 g는 공개
2. Alice는 비밀 a를 고르고 A = g^a mod p를 공개
   Bob은 비밀 b를 고르고 B = g^b mod p를 공개
3. 이제 Alice는 B^a mod p를, Bob은 A^b mod p를 계산
    - 이때 두 값은 g^{ab} mod p가 된다.
4. 이 값이 두사람만 아는 공유키
```

- DH는 암호화나 서명을 위한 것이 아니라 사용자가 공유된 대칭키를 설정하는 데 사용
- DH의 보안은 이산 로그 문제의 계산 난이도에 따라 달라짐

<br>

## 4.5 타원 곡선 암호
### 타원 곡선 (Elliptic Curve)
- 공개키 암호에 필요한 수학 연산을 수행할 수 있는 또 다른 방법을 제공
- 같은 수준의 보안을 성취하기 위해 필요한 비트 수가 적다는 장점
- 타원 곡선 수학을 깊게 다루어서 타원 곡선 수학 연산에 비용이 많이 듦

<br>

## 4.6 공개키 표기법
- 앨리스의 공개키로 메세지 M을 암호화 : $C=\{M\}_{Alice}$
- 앨리스의 개인키로 암호문 C를 복호화 : $M=\{C\}_{Alice}$
- 앨리스가 메세지 M에 한 서명 : $S=\{M\}_{Alice}$

### 공개키와 개인키 연산은 역 관계
- $[\{M\}_{Alice}]_{Alice} = \{[M]_{Alice}\}_{Alice} = M$
- 공개키는 항상 공개 -> 누구나 $\{M\}_{Alice}를 계산 가능$
- 개인키는 비밀 -> 오직 앨리스만이 $[C]_{Alice}$ 또는 $[M]_{Alice}$를 계산

<br>

## 4.7 공개키 암호 용도
### 공개키 암호의 중요한 장점
- 공개키 암호는 공유키를 미리 설정할 필요가 없다.
- 무결성 뿐만 아니라 부인봉쇄 제공

<br>

## 4.8 인증서와 PKI
### 공개키 기반 구조 (PKI)
- 공개키를 안전하게 사용하기 위해 필요한 모든 것을 모아 놓은 것

### 전자인증서 (Digital Certificate)
- 사용자의 공개키와 사용자 이름을 함께 포함. 이는 인증 기관(CA)에 의해 서명

<br>

## 4.9 양자 컴퓨터와 공개키
### 양자 알고리즘
- 1994년 쇼어 알고리즘
    - 인수분해 문제에 대해 효율적인 해결책 제공
- 인수분해는 계수를 인수분해하여 RSA를 해독할 수 있음
    - RSA 계수는 정수 N=pq이며, p와 q는 소수

