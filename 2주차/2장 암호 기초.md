# 2. 암호 기초

<br>

## 2-1. 개요
### 이 장에서 다룰 내용
- [ ] 암호의 기초
- [ ] 정보보안이 **무엇**인가 뿐만 아니라 **왜** 그렇게 해야 하는가를 이해하는 데 필요한 세부 항목을 다룸

<br>

## 2-2. 암호 용어

### 암호화 (Encryption)
- 평문(Plaintext)를 암호문(Chipertext)로 변환
- 데이터를 암호화하는 데 사용하는 것을 **암호 또는 암호체계**라고 함
- 평문은 원본 데이터, 암호문은 암호화된 데이터를 의미

### 복호화 (Decryption)
- 암호문을 원본 데이터인 평문으로 복원하는 것
- 암호체계를 구성하는 데에는 키를 사용
    - 키(key) : 암호화 복호화를 위한 비밀 값

<img width="833" height="165" alt="Image" src="https://github.com/user-attachments/assets/410bc18f-0bdb-4765-ad13-b08ef363f3a2" />

### 대칭키 암호 (Symmetric Key Cryptography)
- 암호화와 복호화에 **같은 키** 사용

### 공개키 암호 (Public Key Cryptography)
- 암호화 복호화에 **서로 다른 키** 사용
- 암호화에 사용되는 공개되어 있는 키
- 공개키 암호에서 암호화 키는 공개되어 있지만 복호화 키는 비밀키로 유지해야 함 (개인키)
    - 공개키 : 누구나 사용 가능
    - 개인키 : 소유자만 보관

### 암호체계의 목표
- 키를 사용하지 않고는 암호문을 복호화할 수 있는 방법이 없도록 하는 것

### 케르크호프스 원칙 (현대 보안의 토대)
>암호체계 자체는 비밀이 아니다. 공격자는 암호체계를 쉽게 파악할 수 있기 때문이다.

- 보안설계 자체가 공개되어 있으니 더 많은 사람이 분석할수록 보안 결함을 더 확실하게 발견할 수 있다는 의미
- 암호뿐만 아니라 다른 보안 분야에도 확대 적용 가능

<br>

## 2.3 고전 암호

### 고전 암호의 종류
- 수천 년 동안 사용된 전통적 암호 방식
- 현대 암호학의 기초 개념을 이해하는 데 중요한 역할

### 단순 치환 암호
>가장 오래된 암호체계

- 가장 기본적인 방법은 현재 문자를 n번째 앞에 있는 문자와 서로 치환해서 암호화하는 것

<img width="953" height="109" alt="단순치환암호" src="https://github.com/user-attachments/assets/4fcf8054-81a8-4512-8011-3e995c48d1d6" />

### 시저 암호
- 단순하게 암호화하고 복호화하는 방법
- 시저 암호에서 알파벳 순서상으로 가능한 n번의 이동을 나타내면 $n\{0, 1, 2, ... , 25\}$가 될 것
- 평문이 n 이동 방법으로 암호화되어 있다면, 평균 13번의 시도로 암호화 키를 찾아낼 수 있음

#### 암호화
$E(x)=(x+n) \ mod \ 26$
#### 복호화
$D(x)=(x-n) \ mod \ 26$

<img width="806" height="85" alt="Image" src="https://github.com/user-attachments/assets/31283b22-3aaf-4b47-9891-75d8872f90ea" />

> 단순 치환 암호를 n 이동 방법으로만 한정할 필요는 없음

### 단순 치환 암호에 대한 공격 분석
#### 무차별 대입 (Brute-Force)
- 가능한 키 : 0 ~ 25 (총 26개)
- 모든 키를 시도하면 반드시 평문을 얻을 수 있음
- 평균 1회 시도
- 연산량이 적어 누구나 쉽게 해독 가능하다는 단점이 있다.

#### 빈도수 탐색 공격
<img width="1101" height="298" alt="Image" src="https://github.com/user-attachments/assets/546c7d8d-8b22-42f9-90b9-22bf22440c70" />
- 일반적인 영어 문자 빈도수와 암호문의 영어 빈도수를 이용하여 평문을 찾아낼 수 있음

#### [카이사르 암호화 브루트포스 공격 실습](https://github.com/Do-heewan/Information_Security/blob/main/1%EC%A3%BC%EC%B0%A8/Caesar_Cipher.py)

#### [카이사르 암호화 빈도 탐색 공격 실습](https://github.com/Do-heewan/Information_Security/blob/main/1%EC%A3%BC%EC%B0%A8/Caesar_Cipher_frequency.py)

<br>

### 이중 전위 암호
>현대 암호에서 사용되는 중요한 개념을 담고 있다.

- 암호화를 하려면 먼저 평문을 주어진 크기의 행렬 형태로 배열하고 행과 열을 순서에 따라 바꿈

<img width="1102" height="551" alt="Image" src="https://github.com/user-attachments/assets/6b83a749-f3a9-4658-ae4e-1ae1c9bb1c86" />

- 단순 치환 암호화 달리 이중 전위 암호는 메시지에 나타나는 문자를 감추지 않음
- 암호문에 대한 평문의 통계적 특성이 암호문 전체에 흩어져 있어서 평문 속에 포함된 통계적 정보에 의존하는 공격은 막을 수 있음

#### [이중 전위 암호 실습](https://github.com/Do-heewan/Information_Security/blob/main/2%EC%A3%BC%EC%B0%A8/Double_Transposition_Cipher.py)

<br>

### 일회성 암호 (OTP, One-Time Pad)
>암호체계 중에서도 가장 안전
- 버넘 암호 (Vernam Cipher)라고 불림
- 안전성이 증명된 암호체계

<img width="904" height="116" alt="Image" src="https://github.com/user-attachments/assets/faeff2cc-f3f5-40b2-8783-20f20a1f1403" />

>평문 메세지 heilhitler를 다음과 같이 암호화 -> P = (001 000 010 100 001 010 111 100 000 101)

- 일회성 암호에는 암호화하려는 메시지와 **동일한 길이를 갖는 무작위 비트열로 만들어진 키**가 필요

$$Encryption : Cipher = Plaintext \oplus key \\
Decryption : Plaintext = Cipher \oplus key$$

- 일회성 암호는 한 번밖에 사용될 수 밖에 없는데, 두 개의 메세지가 같은 키 K로 암호화되어 있다고 가정하였을 떄 두 개의 암호문을 더하면 키가 사라진다.

$$C_1 \oplus C_2 = P_1 \oplus K \oplus P_2 \oplus K = P_1 \oplus P_2$$

#### [일회성 암호 실습](https://github.com/Do-heewan/Information_Security/blob/main/2%EC%A3%BC%EC%B0%A8/One-Time_Pad_Cipher.py)

<br>

### 코드북 암호

- 코드북 암호는 단어와 해당 단어에 할당된 코드가 수록된 사전과 같음
- 가장 중요한 점은 코드북 자체를 잃어버리지 않는 것
- 코드북은 제 2차 세계대전 당시에 널리 사용됨

#### 덧셈 (Additive)
- 기존 코드북을 오래 사용하는 방법
- 메세지를 암호화하고 복호화하려면 **덧셈북과 코드북**이 모두 필요

#### [코드북 암호 실습](https://github.com/Do-heewan/Information_Security/blob/main/2%EC%A3%BC%EC%B0%A8/Code_Book_Cipher.py)

<br>

## 2.4 고전 암호의 역사

### 고전 암호가 역사적 사건에 개입된 세 가지 경우 
#### 1876년 미국 대통령 선거에서 보안이 취약한 암호 사용
- 코드북 암호
- 10개 단어로 된 메세지의 순열
#### 제 1차 세계대전에서 사용된 짐머맨 전보
- 코드북 암호
- 단어를 5자리 숫자로 암호화
#### VENONA 메세지로 미국에 있는 소련 스파이들이 일회성 암호를 사용하여 전송한 메세지
- 일회용 암호를 실세계에서 사용한 흥미로운 사례

<br>

## 2.5 현대 임호의 역사
- 1929년 미국은 **신사는 타인의 우편물을 읽지 않는다.** 라는 문구와 함께 정부의 공식적인 암호 분석 활동을 종료
- 1941년 12월 7일 일본의 공격에 앞서, 미국은 암호 분석 프로그램을 다시 시작 -> 암호 분석의 황금시대
- 태평양 지역 전장에서는 퍼플 암호라고 불리는 암호체계를 일본 정부 고위급이 통신할 때 사용
- 유럽에서는 독일군의 이니그마 암호체계로 부터 해독한 정보가 전쟁중인 연합군에게 아주 중요한 정보가 됨

### 이니그마 암호체계의 배선도

- 제 2차 세계대전 후 암호학은 감춰진 예술에서 현실 세계 과학으로 전환
- 1970년대에 컴퓨터에 엄청난 혁신이 생기면서 극적인 변화를 맞음
- 공개키 암호 등장 (정확히는 재발견)

<br>

## 2.6 암호학의 분류
### 공개키 암호
- 각 공개키에는 복호화에 사용하는 개인키가 항상 같이 존재
- 공개키 암호체계는 대칭키 암호가 수행하는 모든 기능을 수행 가능
- 효울성이 없어서 공개키 암호체계를 사용하지 않음
    - 오늘날 암호문을 만들 때는 대칭키 암호를 주로 사용
- 개인키로 서명 -> 공개키로 복호화

### 해시 함수
- 길이에 상관없이 값을 입력받아 고정된 길이의 출력 값을 만들어냄
- 암호화 해시 함수는 몇 가지 매우 엄격한 요구사항을 충족해야 함

<br>

## 2.7 암호 분석의 분류
### 암호 분석의 목표
- 평문이나 키 또는 두 가지를 모두 찾아내는 것
- 암호문과 알고리즘을 알고 있다면 암호 분석자는 암호문 공격을 할 수 있음

### 알려진 평문
- 공격에 성공할 가능성은 훨씬 높음
- 공격자가 일부 평문과 그에 해당하는 암호문을 알고 있을 때, 이를 바탕으로 키나 다른 평문 추론

### 선택된 평문 공격
- 공격자는 평문을 임의로 선택해 이에 해당하는 암호문을 볼 수도 있음
- 공격자에게 유리한 것은 적응적으로 선택된 평문 공격
- 암호체계에 임시 접근 가능할 때 사용

### 공개키 암호체계에 적용되는 특별한 공격 방법
#### 순방향 탐색 공격
- 모든 경우를 암호화 해보고 암호문과 비교
- 대칭키 암호에서는 사용할 수 없지만 일부 응용 프로그램의 해시 함수를 공격하는 데 사용할 수 있다.
- 순방향 탐색 공격을 대비하여 공개키 암호에서 공격자가 모든 가능한 평문 메세지를 암호화할 수 없도록 하려면 평문 메세지 공간이 충분히 커야 함


